<div class="col mt-4">
    {% assign sorted_posts = site.categories[page.category] | where_exp: "post", "post.title != page.title" | sample:4 %}
    {% if sorted_posts and sorted_posts.size < 4 %}
        {% assign sorted_posts = site.posts | where_exp: "item", "item.title!= page.title" | sample:4 %}
    {% endif %}

    {% for site_category in site.data.categories.list %}
        {% if site_category.name == page.category %}
        {% assign category_url = site_category.url %}
        {% endif %}
    {% endfor %}
    <div class="row col">
            <h2 class="weight-bold mb-1" style="font-size: x-large">
                 {% if category_url %}
                    <a href="{{ category_url }}">{{ page.category }}</a>
                {% else %}
                    <a href="{% link posts.md %}">{{ page.category }}</a>
                {% endif %}
            </h2>
    </div>
    <div class="row">
        {% for post in sorted_posts %}
        <div class="col-md-3 content">
            <a href="{{ post.url }}">
                <img src="{{post.image}}"
                     loading="lazy"
                     decoding="async"
                     alt="{{ post.description | smartify }}"
                     class="rounded">
                <h3 class="pt-1" style="font-size: large">{{ post.title | smartify }}</h3>
            </a>
        </div>
        {% endfor %}
    </div>
</div>