<div id="feedbackSlider" class="image-slider-container">

    <div class="image-slider-track">
        {% assign images = site.data.feedback.image %}
        {% for item in images %}
        <div class="image-slide">
            <img
                    src="{{ item.url | relative_url }}"
                    alt="{{ item.alt }}"
                    title="{{ item.alt }}"
                    loading="lazy"
            >
        </div>
        {% endfor %}
    </div>

    <div class="image-slider-buttons text-center mt-0 mt-md-4">
        <button class="image-slider-prev" type="button">←</button>
        <button class="image-slider-next" type="button">→</button>
    </div>

</div>

<script>
    (function () {
      const root = document.getElementById("feedbackSlider");
      if (!root) return;

      const track = root.querySelector(".image-slider-track");
      const slides = Array.from(root.querySelectorAll(".image-slide"));
      const prevBtn = root.querySelector(".image-slider-prev");
      const nextBtn = root.querySelector(".image-slider-next");

      let current = 0;

      function getGap() {
        return parseFloat(getComputedStyle(track).gap) || 0;
      }

      function update() {
        const slideW = slides[0].offsetWidth + getGap();
        track.style.transform = `translateX(-${slideW * current}px)`;
      }

      nextBtn.addEventListener("click", () => {
        current = (current + 1) % slides.length;
        update();
      });

      prevBtn.addEventListener("click", () => {
        current = (current - 1 + slides.length) % slides.length;
        update();
      });

      window.addEventListener("resize", update);
      update();
    })();
</script>